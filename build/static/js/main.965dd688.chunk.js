(this.webpackJsonpniceday=this.webpackJsonpniceday||[]).push([[0],{231:function(e,t,n){},232:function(e,t,n){},356:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(62),s=n.n(c),o=n(53),i=(n(231),n(232),n(16)),l=n(63),u=n(10),j=n(1),d=Object(a.createContext)({}),b=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)({}),o=Object(u.a)(s,2),b=(o[0],o[1]),h=Object(i.f)();Object(a.useEffect)((function(){var e=localStorage.getItem("user");e&&(b(JSON.parse(e)),c(!0))}),[]);var O={login:function(){c(!0),h.push("/dashboard")},loggedIn:r,logout:function(){localStorage.removeItem("user"),c(!1),h.push("/")},getCurrentUser:function(){var e=localStorage.getItem("user");return JSON.parse(e)}};return Object(j.jsx)(d.Provider,Object(l.a)({value:O},e))},h=function(){return r.a.useContext(d)},O=n(45),x=n.n(O),p=n(442),g=n(418),m=n(112),f=n(430),v=n(433),w=n(446),S=function(){var e=h(),t=e.loggedIn,n=e.login,r=Object(i.f)(),c=Object(a.useState)(""),s=Object(u.a)(c,2),o=s[0],l=s[1],d=Object(a.useState)(""),b=Object(u.a)(d,2),O=b[0],S=b[1],y=Object(a.useState)(),C=Object(u.a)(y,2),k=(C[0],C[1]),D=Object(a.useState)(""),I=Object(u.a)(D,2),U=I[0],M=I[1];function F(e){13===e.charCode&&Y()}t&&r.push("/dashboard");var Y=function(){var e={user_name:o,password:O};try{x.a.post("http://156.67.216.116/api/users/login",e).then((function(e){e.data.success>0?(k(e.data),localStorage.setItem("user",JSON.stringify(e.data)),n()):M(e.data.message)})).catch((function(e){M(e.message)}))}catch(t){M(t.message)}};return Object(j.jsx)(p.a,{sx:{mt:10,mb:2},children:Object(j.jsxs)(g.a,{spacing:2,direction:"column",children:[Object(j.jsx)(m.a,{variant:"h5",align:"center",children:"Sign In"}),Object(j.jsx)(f.a,{label:"user name",variant:"outlined",onChange:function(e){l(e.target.value)},onKeyPress:F}),Object(j.jsx)(f.a,{label:"password",type:"password",variant:"outlined",onChange:function(e){S(e.target.value)},onKeyPress:F}),""!=U&&Object(j.jsx)(v.a,{severity:"error",children:U}),Object(j.jsx)("br",{}),Object(j.jsx)(w.a,{onClick:Y,variant:"contained",color:"primary",children:"Sign In"})]})})},y=n(5),C=n(27),k=n(437),D=n(424),I=n(447),U=n(448),M=n(444),F=n(426),Y=n(445),B=n(179),A=n.n(B),N=n(182),P=n.n(N),L=n(183),R=n.n(L),E=n(434),T=n(427),W=n(428),_=n(184),z=n.n(_),J=n(185),q=n.n(J),H=n(186),G=n.n(H),K=n(187),V=n.n(K),Q=n(438),X=n(425),Z=n(177),$=n(198),ee=n(449),te=n(441),ne=n(429),ae=240,re=Object(y.a)("main",{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(l.a)({flexGrow:1,padding:t.spacing(3),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(ae,"px")},n&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0})})),ce=Object(y.a)(I.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(l.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{width:"calc(100% - ".concat(ae,"px)"),marginLeft:"".concat(ae,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})})),se=Object(y.a)("div")((function(e){var t=e.theme;return Object(l.a)(Object(l.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"flex-end"})}));function oe(){var e,t,n=Object(C.a)(),r=a.useState(!1),c=Object(u.a)(r,2),s=c[0],d=c[1],b=(Object(i.f)(),h()),O=b.logout,x=(b.loggedIn,b.getCurrentUser),g=Object(a.useState)(),f=Object(u.a)(g,2),v=f[0],S=f[1],y=a.useState(null),I=Object(u.a)(y,2),B=I[0],N=I[1],L=Boolean(B);Object(a.useEffect)((function(){var e=x();e&&S("".concat(e.data.user_name," (").concat(e.data.role<2?"Admin":"User",")"))}),[]);function _(){d(!1)}return Object(j.jsxs)(p.a,{sx:{display:"flex"},children:[Object(j.jsx)(D.a,{}),Object(j.jsx)(ce,{position:"fixed",open:s,children:Object(j.jsxs)(U.a,{children:[Object(j.jsx)(Y.a,{color:"inherit","aria-label":"open drawer",onClick:function(){d(!0)},edge:"start",sx:Object(l.a)({mr:2},s&&{display:"none"}),children:Object(j.jsx)(A.a,{})}),Object(j.jsx)(m.a,{variant:"h6",noWrap:!0,sx:{flexGrow:1},component:"div",children:"Workout Everyday"}),Object(j.jsxs)("div",{children:[Object(j.jsx)(Y.a,{id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":L?"true":void 0,onClick:function(e){N(e.currentTarget)},children:Object(j.jsx)(te.a,{className:"avatarHover",label:null===(e=x().data)||void 0===e?void 0:e.user_name,sx:{bgcolor:X.a[400],color:Z.a[100]}})}),Object(j.jsx)($.a,{id:"basic-menu",anchorEl:B,open:L,onClose:function(){N(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:Object(j.jsx)(ee.a,{onClick:function(){O()},children:"Log out"})})]})]})}),Object(j.jsxs)(k.a,{sx:{width:ae,flexShrink:0,"& .MuiDrawer-paper":{width:ae,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:s,children:[Object(j.jsxs)(se,{children:[Object(j.jsx)(ne.a,{title:v,children:Object(j.jsx)(Q.a,{className:"avatarHover",sx:{bgcolor:X.a[500]},children:null===(t=x().data)||void 0===t?void 0:t.user_name.substring(0,2)})}),Object(j.jsx)(Y.a,{onClick:function(){d(!1)},children:"ltr"===n.direction?Object(j.jsx)(P.a,{}):Object(j.jsx)(R.a,{})})]}),Object(j.jsx)(F.a,{}),Object(j.jsxs)(M.a,{children:[Object(j.jsxs)(E.a,{button:!0,children:[Object(j.jsx)(T.a,{children:Object(j.jsx)(z.a,{})}),Object(j.jsx)(o.b,{to:"/dashboard",style:{textDecoration:"none"},onClick:_,children:"Dashboard"})]}),x().data.role<2&&Object(j.jsxs)(E.a,{button:!0,children:[Object(j.jsx)(T.a,{children:Object(j.jsx)(q.a,{})}),Object(j.jsx)(o.b,{to:"/create",style:{textDecoration:"none"},onClick:_,children:"Create Account"})]}),Object(j.jsxs)(E.a,{button:!0,children:[Object(j.jsx)(T.a,{children:Object(j.jsx)(G.a,{})}),Object(j.jsx)(W.a,{primary:"Chat Room"})]})]}),Object(j.jsx)(F.a,{}),Object(j.jsx)(M.a,{children:Object(j.jsxs)(E.a,{button:!0,children:[Object(j.jsx)(T.a,{children:Object(j.jsx)(V.a,{})}),Object(j.jsx)(w.a,{onClick:function(){O()},children:"Log Out"})]})})]}),Object(j.jsx)(re,{open:s,children:Object(j.jsx)(se,{})})]})}var ie=n(450),le=n(453);function ue(){return Object(j.jsxs)(m.a,{variant:"body2",color:"text.secondary",children:["Copyright \xa9 ",Object(j.jsx)(le.a,{color:"inherit",href:"https://material-ui.com/",children:"Workout Everyday"})," ",(new Date).getFullYear(),"."]})}function je(e){var t=e.children;return Object(j.jsxs)(p.a,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[Object(j.jsx)(ie.a,{component:"main",maxWidth:"sm",children:t}),Object(j.jsx)(p.a,{component:"footer",sx:{py:3,px:2,mt:"auto",backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[200]:e.palette.grey[800]}},children:Object(j.jsxs)(ie.a,{maxWidth:"sm",children:[Object(j.jsx)(m.a,{variant:"body1"}),Object(j.jsx)(ue,{})]})})]})}var de=n(43),be=n.n(de),he=n(74),Oe=n(432),xe=n(439),pe=n(451),ge=n(443),me=n(419),fe=n(196),ve=n(87),we=ve.a().shape({username:ve.b().required("User name is required!"),password:ve.b().min(5).max(20).required("Password is required!")}),Se=n.p+"static/media/notification-sound.5b9ecb19.wav";function ye(){var e=Object(i.f)(),t=h(),n=t.loggedIn,r=t.getCurrentUser;(!n||r().data.role>1)&&e.push("/");var c=Object(a.useState)("2"),s=Object(u.a)(c,2),o=s[0],l=s[1],d=Object(a.useState)(""),b=Object(u.a)(d,2),O=b[0],p=b[1],S=Object(a.useState)(!1),y=Object(u.a)(S,2),C=y[0],k=y[1],D=Object(a.useState)("2"),I=Object(u.a)(D,2),U=(I[0],I[1],Object(fe.a)({initialValues:{username:"",password:""},onSubmit:function(e){F(e)},validationSchema:we}));function M(e){p(e),new Audio(Se).play()}var F=function(){var e=Object(he.a)(be.a.mark((function e(t){var n,a,c,s,i,l;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r(),a={user_name:t.username,password:t.password,role:o,parent_id:n.data.id},c=n.token,s={headers:{Authorization:"Bearer ".concat(c)}},e.prev=4,e.next=7,x.a.post("http://156.67.216.116/api/users/",a,s).catch((function(e){throw e}));case 7:l=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),i=e.t0;case 13:i?(k(!1),M(i.message)):(l.data.success>0?k(!0):k(!1),M(l.data.message),U.resetForm());case 14:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();return n?Object(j.jsx)("form",{onSubmit:U.handleSubmit,children:Object(j.jsxs)(g.a,{spacing:2,direction:"column",children:[Object(j.jsx)(m.a,{variant:"h5",align:"center",children:"Create Account"}),Object(j.jsx)(f.a,{label:"user name",variant:"outlined",name:"username",value:U.values.username,onChange:U.handleChange,error:U.touched.username&&Boolean(U.errors.username),helperText:U.touched.username&&U.errors.username,onBlur:U.handleBlur,autoComplete:"off"}),Object(j.jsx)(f.a,{label:"password",type:"password",variant:"outlined",name:"password",value:U.values.password,onChange:U.handleChange,error:U.touched.password&&Boolean(U.errors.password),helperText:U.touched.password&&U.errors.password,onBlur:U.handleBlur}),0===r().data.role&&Object(j.jsxs)(ge.a,{component:"fieldset",children:[Object(j.jsx)(me.a,{component:"legend",children:"Role"}),Object(j.jsxs)(xe.a,{"aria-label":"gender",name:"controlled-radio-buttons-group",value:o,onChange:function(e){l(e.target.value)},children:[Object(j.jsx)(pe.a,{value:"1",control:Object(j.jsx)(Oe.a,{}),label:"Admin"}),Object(j.jsx)(pe.a,{value:"2",control:Object(j.jsx)(Oe.a,{}),label:"User"})]})]}),""!=O&&Object(j.jsx)(v.a,{severity:"".concat(C?"success":"error"),children:O}),Object(j.jsx)("br",{}),Object(j.jsx)(w.a,{type:"submit",variant:"contained",color:"primary",children:"Create Account"})]})}):Object(j.jsx)(i.a,{to:"/"})}var Ce=n(435),ke={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function De(e){var t=e.onSubmit,n=h(),c=(n.loggedIn,n.getCurrentUser,Object(a.useState)("")),s=Object(u.a)(c,2),o=s[0],i=s[1],l=r.a.useState(!1),d=Object(u.a)(l,2),b=d[0],O=d[1],x=function(){return O(!1)};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(p.a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off"}),Object(j.jsx)(w.a,{onClick:function(){return O(!0)},children:"Rest Day"}),Object(j.jsx)(Ce.a,{open:b,onClose:x,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(j.jsx)(p.a,{sx:ke,children:Object(j.jsxs)(g.a,{direction:"column",spacing:2,children:[Object(j.jsx)(m.a,{variant:"h5",gutterBottom:!0,component:"div",children:"Write something"}),Object(j.jsx)(f.a,{id:"outlined-multiline-static",label:"Notes",multiline:!0,rows:4,onChange:function(e){i(e.target.value)}}),Object(j.jsxs)(g.a,{spacing:2,direction:"row",children:[Object(j.jsx)(w.a,{align:"left",variant:"contained",className:"submit",onClick:function(){t(1,o),x()},children:"Post"}),Object(j.jsx)(w.a,{align:"right",variant:"contained",className:"cancel",onClick:function(){return x()},children:"Cancel"})]})]})})})]})}var Ie=n(132),Ue=n.n(Ie),Me=n(460),Fe=n(464),Ye=n(463),Be=n(459),Ae=n(461),Ne=n(462),Pe=n(452);n(454),n(458),n(456),n(457),n(455);var Le=n(68),Re=n(76),Ee=n(195),Te=n.n(Ee),We=n(436),_e=n(194),ze=n.n(_e),Je=n(193),qe=n.n(Je);function He(e){var t=e.userId,n=e.activeStatus,r=e.onSuspend,c=a.useState(null),s=Object(u.a)(c,2),o=s[0],i=s[1],l=Boolean(o);return Object(j.jsxs)("div",{children:[Object(j.jsx)(Y.a,{id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:function(e){i(e.currentTarget)},children:Object(j.jsx)(qe.a,{})}),Object(j.jsxs)($.a,{id:"basic-menu",anchorEl:o,open:l,onClose:function(){i(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(j.jsx)(ee.a,{onClick:function(){!function(e,t){r(e,t),i(null)}(t,n)},children:2!=n?"Suspend":"Unsuspend"}),Object(j.jsx)(ee.a,{onClick:function(){i(null)},children:"Remove User"})]})]})}function Ge(e){var t=e.results,r=e.onSuspend,c=e.loginUserRole,s=Object(a.useState)(!1),o=Object(u.a)(s,2),i=(o[0],o[1],h().getCurrentUser);function l(e){var t=n(132),a=t().toDate();return t(a).format("DD/MM/YYYY")===t(e).format("DD/MM/YYYY")?"Today":a.getMonth()==new Date(e).getMonth()&&a.getFullYear()==new Date(e).getFullYear()?a.getDate()-new Date(e).getDate()==1?"Yesterday":"".concat(a.getDate()-new Date(e).getDate()," days ago"):a.getMonth()!=new Date(e).getMonth()&&a.getFullYear()==new Date(e).getFullYear()?a.getMonth()-new Date(e).getMonth()==1?"1 month ago":"".concat(a.getMonth()-new Date(e).getMonth()," months ago"):"".concat(a.getFullYear()-new Date(e).getFullYear()," Year(s) ago")}return Object(j.jsx)(j.Fragment,{children:t&&Object(j.jsx)(Be.a,{component:Pe.a,children:Object(j.jsxs)(Me.a,{children:[Object(j.jsx)(Ae.a,{children:Object(j.jsxs)(Ne.a,{children:[Object(j.jsx)(Ye.a,{children:"Name"}),Object(j.jsx)(Ye.a,{align:"center",children:"Active"}),Object(j.jsx)(Ye.a,{align:"center"})]})}),Object(j.jsx)(Fe.a,{children:t.map((function(e,t){return Object(j.jsxs)(Ne.a,{sx:{"&:last-child td, &:last-child th":{border:0},bgcolor:e.Status>0?Le.a[100]:Z.a[10]},children:[Object(j.jsx)(Ye.a,{component:"th",scope:"row",children:Object(j.jsxs)(g.a,{direction:"row",children:[e.UserName,2==e.Active&&Object(j.jsx)(ne.a,{title:"User Suspended",children:Object(j.jsx)(ze.a,{style:{color:Re.a[800]}})})]})}),Object(j.jsxs)(Ye.a,{align:"center",children:[l(e.RecDate)," ",Ue()(e.RecDate).format("hh:mm a")]}),Object(j.jsx)(Ye.a,{align:"center",children:Object(j.jsxs)(g.a,{direction:"row",justifyContent:"flex-end",alignItems:"flex-end",children:[e.Status>0&&Object(j.jsx)(Y.a,{onClick:function(){return t=e.Note,alert(t);var t},children:Object(j.jsx)(We.a,{badgeContent:1,color:"secondary",children:Object(j.jsx)(Te.a,{sx:{color:Z.a[600]}})})}),2!==c&&i().data.id!==e.UserId&&Object(j.jsx)(He,{userId:e.UserId,activeStatus:e.Active,onSuspend:r})]})})]},e.UserId)}))})]})})})}function Ke(){var e=h(),t=e.loggedIn,n=e.getCurrentUser,r=Object(a.useState)(null),c=Object(u.a)(r,2),s=c[0],o=c[1],l=Object(a.useState)(!1),d=Object(u.a)(l,2),b=d[0],O=d[1],p=Object(a.useState)(""),m=Object(u.a)(p,2),f=m[0],S=m[1],y=Object(a.useState)(!1),C=Object(u.a)(y,2),k=C[0],D=C[1];function I(e){S(e),new Audio(Se).play()}function U(){return M.apply(this,arguments)}function M(){return(M=Object(he.a)(be.a.mark((function e(){var t,a,r,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n(),a={userId:t.data.id,role:t.data.role},r=t.token,c={headers:{Authorization:"Bearer ".concat(r)},params:a},e.next=6,x.a.get("http://156.67.216.116/api/users/workout",c).then((function(e){e.data.success>0?o(e.data.rows):(D(!1),I(e.data.message))})).catch((function(e){D(!1),I(e.message.toString())}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(he.a)(be.a.mark((function e(t,a){var r,c,s,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),c={id:t,active:a},s=r.token,o={headers:{Authorization:"Bearer ".concat(s)}},e.next=6,x.a.patch("http://156.67.216.116/api/users/suspend",c,o).then((function(e){e.data.success>0?D(!0):D(!1),I(e.data.message),U()})).catch((function(e){D(!1),I(e.message.toString())}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t){return B.apply(this,arguments)}function B(){return(B=Object(he.a)(be.a.mark((function e(t,a){var r,c,s,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),c=0==t?{userId:r.data.id,status:t}:{userId:r.data.id,status:t,note:a},s=r.token,o={headers:{Authorization:"Bearer ".concat(s)}},e.next=6,x.a.post("http://156.67.216.116/api/users/workout",c,o).then((function(e){e.data.success>0?D(!0):D(!1),I(e.data.message),U()})).catch((function(e){D(!1),I(e.message.toString())}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){t&&U()}),[]),t?Object(j.jsxs)("div",{children:[""!=f&&Object(j.jsx)(v.a,{severity:"".concat(k?"success":"error"),children:f}),Object(j.jsx)("br",{}),Object(j.jsxs)(g.a,{spacing:2,direction:"row",children:[Object(j.jsx)(w.a,{variant:"contained",onClick:function(){Y(0)},children:"Register"}),Object(j.jsx)("button",{children:Object(j.jsx)(De,{variant:"outlined",onSubmit:Y})})]}),Object(j.jsx)("br",{}),b&&Object(j.jsx)(De,{closeModal:O}),s?Object(j.jsx)(Ge,{results:s,onSuspend:function(e,t){return F.apply(this,arguments)},loginUserRole:n().data.role}):null]}):Object(j.jsx)(i.a,{to:"/"})}var Ve=function(){var e=h(),t=e.loggedIn;return e.getCurrentUser,Object(j.jsxs)(je,{children:[t&&Object(j.jsx)(oe,{}),Object(j.jsx)(i.b,{exact:!0,path:"/",component:S}),Object(j.jsx)(i.b,{exact:!0,path:"/dashboard",component:Ke}),Object(j.jsx)(i.b,{exact:!0,path:"/create",component:ye})]})},Qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,465)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(o.a,{children:Object(j.jsx)(b,{children:Object(j.jsx)(Ve,{})})})}),document.getElementById("root")),Qe()}},[[356,1,2]]]);
//# sourceMappingURL=main.965dd688.chunk.js.map
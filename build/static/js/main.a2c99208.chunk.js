(this.webpackJsonpniceday=this.webpackJsonpniceday||[]).push([[0],{274:function(e,t,n){},275:function(e,t,n){},421:function(e,t){},423:function(e,t){},431:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(74),o=n.n(c),s=n(58),i=(n(274),n(275),n(22)),u=n(75),l=n(10),j=n(1),d=Object(a.createContext)({}),b=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)({}),s=Object(l.a)(o,2),b=(s[0],s[1]),h=Object(i.f)();Object(a.useEffect)((function(){var e=localStorage.getItem("user");e&&(b(JSON.parse(e)),c(!0))}),[]);var O={login:function(){c(!0),h.push("/dashboard")},loggedIn:r,logout:function(){localStorage.removeItem("user"),c(!1),h.push("/")},getCurrentUser:function(){var e=localStorage.getItem("user");return JSON.parse(e)}};return Object(j.jsx)(d.Provider,Object(u.a)({value:O},e))},h=function(){return r.a.useContext(d)},O=n(59),p=n.n(O),x=n(519),g=n(494),f=n(520),m=n(505),v=n(508),w=n(524),y=function(){var e=h(),t=e.loggedIn,n=e.login,r=Object(i.f)(),c=Object(a.useState)(""),o=Object(l.a)(c,2),s=o[0],u=o[1],d=Object(a.useState)(""),b=Object(l.a)(d,2),O=b[0],y=b[1],S=Object(a.useState)(),C=Object(l.a)(S,2),D=(C[0],C[1]),I=Object(a.useState)(""),k=Object(l.a)(I,2),U=k[0],M=k[1];function F(e){13===e.charCode&&Y()}t&&r.push("/dashboard");var Y=function(){var e={user_name:s,password:O};try{p.a.post("".concat("https://pyawmal.com/api","/users/login"),e).then((function(e){e.data.success>0?(D(e.data),localStorage.setItem("user",JSON.stringify(e.data)),n()):M(e.data.message)})).catch((function(e){M(e.message)}))}catch(t){M(t.message)}};return Object(j.jsx)(x.a,{sx:{mt:10,mb:2},children:Object(j.jsxs)(g.a,{spacing:2,direction:"column",children:[Object(j.jsx)(f.a,{variant:"h5",align:"center",children:"Sign In"}),Object(j.jsx)(m.a,{label:"user name",variant:"outlined",onChange:function(e){u(e.target.value)},onKeyPress:F}),Object(j.jsx)(m.a,{label:"password",type:"password",variant:"outlined",onChange:function(e){y(e.target.value)},onKeyPress:F}),""!=U&&Object(j.jsx)(v.a,{severity:"error",children:U}),Object(j.jsx)("br",{}),Object(j.jsx)(w.a,{onClick:Y,variant:"contained",color:"primary",children:"Sign In"})]})})},S=n(5),C=n(31),D=n(514),I=n(500),k=n(525),U=n(526),M=n(522),F=n(502),Y=n(523),A=n(216),B=n.n(A),P=n(219),R=n.n(P),E=n(220),N=n.n(E),L=n(509),T=n(503),W=n(221),_=n.n(W),z=n(222),J=n.n(z),q=n(223),H=n.n(q),V=n(224),G=n.n(V),K=n(515),Q=n(501),X=n(214),Z=n(241),$=n(513),ee=n(518),te=n(504),ne=240,ae=Object(S.a)("main",{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(u.a)({flexGrow:1,padding:t.spacing(3),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(ne,"px")},n&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0})})),re=Object(S.a)(k.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(u.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{width:"calc(100% - ".concat(ne,"px)"),marginLeft:"".concat(ne,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})})),ce=Object(S.a)("div")((function(e){var t=e.theme;return Object(u.a)(Object(u.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"flex-end"})}));function oe(){var e,t,n=Object(C.a)(),r=a.useState(!1),c=Object(l.a)(r,2),o=c[0],d=c[1],b=(Object(i.f)(),h()),O=b.logout,p=(b.loggedIn,b.getCurrentUser),g=Object(a.useState)(),m=Object(l.a)(g,2),v=m[0],y=m[1],S=a.useState(null),k=Object(l.a)(S,2),A=k[0],P=k[1],E=Boolean(A);Object(a.useEffect)((function(){var e=p();e&&y("".concat(e.data.user_name," (").concat(e.data.role<2?"Admin":"User",")"))}),[]);function W(){d(!1)}return Object(j.jsxs)(x.a,{sx:{display:"flex"},children:[Object(j.jsx)(I.a,{}),Object(j.jsx)(re,{position:"fixed",open:o,children:Object(j.jsxs)(U.a,{children:[Object(j.jsx)(Y.a,{color:"inherit","aria-label":"open drawer",onClick:function(){d(!0)},edge:"start",sx:Object(u.a)({mr:2},o&&{display:"none"}),children:Object(j.jsx)(B.a,{})}),Object(j.jsx)(f.a,{variant:"h6",noWrap:!0,sx:{flexGrow:1},component:"div",children:"Workout Everyday"}),Object(j.jsxs)("div",{children:[Object(j.jsx)(Y.a,{id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":E?"true":void 0,onClick:function(e){P(e.currentTarget)},children:Object(j.jsx)(ee.a,{className:"avatarHover",label:null===(e=p().data)||void 0===e?void 0:e.user_name,sx:{bgcolor:Q.a[400],color:X.a[100]}})}),Object(j.jsx)(Z.a,{id:"basic-menu",anchorEl:A,open:E,onClose:function(){P(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:Object(j.jsx)($.a,{onClick:function(){O()},children:"Log out"})})]})]})}),Object(j.jsxs)(D.a,{sx:{width:ne,flexShrink:0,"& .MuiDrawer-paper":{width:ne,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:o,children:[Object(j.jsxs)(ce,{children:[Object(j.jsx)(te.a,{title:v,children:Object(j.jsx)(K.a,{className:"avatarHover",sx:{bgcolor:Q.a[500]},children:null===(t=p().data)||void 0===t?void 0:t.user_name.substring(0,2)})}),Object(j.jsx)(Y.a,{onClick:function(){d(!1)},children:"ltr"===n.direction?Object(j.jsx)(R.a,{}):Object(j.jsx)(N.a,{})})]}),Object(j.jsx)(F.a,{}),Object(j.jsxs)(M.a,{children:[Object(j.jsxs)(L.a,{button:!0,children:[Object(j.jsx)(T.a,{children:Object(j.jsx)(_.a,{})}),Object(j.jsx)(s.b,{to:"/dashboard",style:{textDecoration:"none"},onClick:W,children:"Dashboard"})]}),p().data.role<2&&Object(j.jsxs)(L.a,{button:!0,children:[Object(j.jsx)(T.a,{children:Object(j.jsx)(J.a,{})}),Object(j.jsx)(s.b,{to:"/create",style:{textDecoration:"none"},onClick:W,children:"Create Account"})]}),Object(j.jsxs)(L.a,{button:!0,children:[Object(j.jsx)(T.a,{children:Object(j.jsx)(H.a,{})}),Object(j.jsx)(s.b,{to:"/chat",style:{textDecoration:"none"},onClick:W,children:"Chat Room"})]})]}),Object(j.jsx)(F.a,{}),Object(j.jsx)(M.a,{children:Object(j.jsxs)(L.a,{button:!0,children:[Object(j.jsx)(T.a,{children:Object(j.jsx)(G.a,{})}),Object(j.jsx)(w.a,{onClick:function(){O()},children:"Log Out"})]})})]}),Object(j.jsx)(ae,{open:o,children:Object(j.jsx)(ce,{})})]})}var se=n(527),ie=n(530);function ue(){return Object(j.jsxs)(f.a,{variant:"body2",color:"text.secondary",children:["Copyright \xa9 ",Object(j.jsx)(ie.a,{color:"inherit",href:"https://material-ui.com/",children:"Workout Everyday"})," ",(new Date).getFullYear(),"."]})}function le(e){var t=e.children;return Object(j.jsxs)(x.a,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[Object(j.jsx)(se.a,{component:"main",maxWidth:"sm",children:t}),Object(j.jsx)(x.a,{component:"footer",sx:{py:3,px:2,mt:"auto",backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[200]:e.palette.grey[800]}},children:Object(j.jsxs)(se.a,{maxWidth:"sm",children:[Object(j.jsx)(f.a,{variant:"body1"}),Object(j.jsx)(ue,{})]})})]})}var je=n(54),de=n.n(je),be=n(94),he=n(506),Oe=n(516),pe=n(528),xe=n(521),ge=n(495),fe=n(238),me=n(110),ve=me.a().shape({username:me.b().required("User name is required!"),password:me.b().min(5).max(20).required("Password is required!")}),we=n.p+"static/media/notification-sound.5b9ecb19.wav";function ye(){var e=Object(i.f)(),t=h(),n=t.loggedIn,r=t.getCurrentUser;(!n||r().data.role>1)&&e.push("/");var c=Object(a.useState)("2"),o=Object(l.a)(c,2),s=o[0],u=o[1],d=Object(a.useState)(""),b=Object(l.a)(d,2),O=b[0],x=b[1],y=Object(a.useState)(!1),S=Object(l.a)(y,2),C=S[0],D=S[1],I=Object(a.useState)("2"),k=Object(l.a)(I,2),U=(k[0],k[1],Object(fe.a)({initialValues:{username:"",password:""},onSubmit:function(e){F(e)},validationSchema:ve}));function M(e){x(e),new Audio(we).play()}var F=function(){var e=Object(be.a)(de.a.mark((function e(t){var n,a,c,o,i,u;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r(),a={user_name:t.username,password:t.password,role:s,parent_id:n.data.id},c=n.token,o={headers:{Authorization:"Bearer ".concat(c)}},e.prev=4,e.next=7,p.a.post("".concat("https://pyawmal.com/api","/users"),a,o).catch((function(e){throw e}));case 7:u=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),i=e.t0;case 13:i?(D(!1),M(i.message)):(u.data.success>0?D(!0):D(!1),M(u.data.message),U.resetForm());case 14:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();return n?Object(j.jsx)("form",{onSubmit:U.handleSubmit,children:Object(j.jsxs)(g.a,{spacing:2,direction:"column",children:[Object(j.jsx)(f.a,{variant:"h5",align:"center",children:"Create Account"}),Object(j.jsx)(m.a,{label:"user name",variant:"outlined",name:"username",value:U.values.username,onChange:U.handleChange,error:U.touched.username&&Boolean(U.errors.username),helperText:U.touched.username&&U.errors.username,onBlur:U.handleBlur,autoComplete:"off"}),Object(j.jsx)(m.a,{label:"password",type:"password",variant:"outlined",name:"password",value:U.values.password,onChange:U.handleChange,error:U.touched.password&&Boolean(U.errors.password),helperText:U.touched.password&&U.errors.password,onBlur:U.handleBlur}),0===r().data.role&&Object(j.jsxs)(xe.a,{component:"fieldset",children:[Object(j.jsx)(ge.a,{component:"legend",children:"Role"}),Object(j.jsxs)(Oe.a,{"aria-label":"gender",name:"controlled-radio-buttons-group",value:s,onChange:function(e){u(e.target.value)},children:[Object(j.jsx)(pe.a,{value:"1",control:Object(j.jsx)(he.a,{}),label:"Admin"}),Object(j.jsx)(pe.a,{value:"2",control:Object(j.jsx)(he.a,{}),label:"User"})]})]}),""!=O&&Object(j.jsx)(v.a,{severity:"".concat(C?"success":"error"),children:O}),Object(j.jsx)("br",{}),Object(j.jsx)(w.a,{type:"submit",variant:"contained",color:"primary",children:"Create Account"})]})}):Object(j.jsx)(i.a,{to:"/"})}var Se=n(511),Ce={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function De(e){var t=e.onSubmit,n=h(),c=(n.loggedIn,n.getCurrentUser,Object(a.useState)("")),o=Object(l.a)(c,2),s=o[0],i=o[1],u=r.a.useState(!1),d=Object(l.a)(u,2),b=d[0],O=d[1],p=function(){return O(!1)};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(x.a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off"}),Object(j.jsx)(w.a,{onClick:function(){return O(!0)},children:"Rest Day"}),Object(j.jsx)(Se.a,{open:b,onClose:p,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(j.jsx)(x.a,{sx:Ce,children:Object(j.jsxs)(g.a,{direction:"column",spacing:2,children:[Object(j.jsx)(f.a,{variant:"h5",gutterBottom:!0,component:"div",children:"Write something"}),Object(j.jsx)(m.a,{id:"outlined-multiline-static",label:"Notes",multiline:!0,rows:4,onChange:function(e){i(e.target.value)}}),Object(j.jsxs)(g.a,{spacing:2,direction:"row",children:[Object(j.jsx)(w.a,{align:"left",variant:"contained",className:"submit",onClick:function(){t(1,s),p()},children:"Post"}),Object(j.jsx)(w.a,{align:"right",variant:"contained",className:"cancel",onClick:function(){return p()},children:"Cancel"})]})]})})})]})}var Ie=n(154),ke=n.n(Ie),Ue=n(537),Me=n(541),Fe=n(540),Ye=n(536),Ae=n(538),Be=n(539),Pe=n(529);n(531),n(535),n(533),n(534),n(532);var Re=n(82),Ee=n(96),Ne=n(232),Le=n.n(Ne),Te=n(512),We=n(231),_e=n.n(We),ze=n(230),Je=n.n(ze);function qe(e){var t=e.userId,n=e.activeStatus,r=e.onSuspend,c=a.useState(null),o=Object(l.a)(c,2),s=o[0],i=o[1],u=Boolean(s);return Object(j.jsxs)("div",{children:[Object(j.jsx)(Y.a,{id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":u?"true":void 0,onClick:function(e){i(e.currentTarget)},children:Object(j.jsx)(Je.a,{})}),Object(j.jsxs)(Z.a,{id:"basic-menu",anchorEl:s,open:u,onClose:function(){i(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(j.jsx)($.a,{onClick:function(){!function(e,t){r(e,t),i(null)}(t,n)},children:2!=n?"Suspend":"Unsuspend"}),Object(j.jsx)($.a,{onClick:function(){i(null)},children:"Remove User"})]})]})}function He(e){var t=e.results,r=e.onSuspend,c=e.loginUserRole,o=Object(a.useState)(!1),s=Object(l.a)(o,2),i=(s[0],s[1],h().getCurrentUser);function u(e){var t=n(154),a=t().toDate();return t(a).format("DD/MM/YYYY")===t(e).format("DD/MM/YYYY")?"Today":a.getMonth()==new Date(e).getMonth()&&a.getFullYear()==new Date(e).getFullYear()?a.getDate()-new Date(e).getDate()==1?"Yesterday":"".concat(a.getDate()-new Date(e).getDate()," days ago"):a.getMonth()!=new Date(e).getMonth()&&a.getFullYear()==new Date(e).getFullYear()?a.getMonth()-new Date(e).getMonth()==1?"1 month ago":"".concat(a.getMonth()-new Date(e).getMonth()," months ago"):"".concat(a.getFullYear()-new Date(e).getFullYear()," Year(s) ago")}return Object(j.jsx)(j.Fragment,{children:t&&Object(j.jsx)(Ye.a,{component:Pe.a,children:Object(j.jsxs)(Ue.a,{children:[Object(j.jsx)(Ae.a,{children:Object(j.jsxs)(Be.a,{children:[Object(j.jsx)(Fe.a,{children:"Name"}),Object(j.jsx)(Fe.a,{align:"center",children:"Active"}),Object(j.jsx)(Fe.a,{align:"center"})]})}),Object(j.jsx)(Me.a,{children:t.map((function(e,t){return Object(j.jsxs)(Be.a,{sx:{"&:last-child td, &:last-child th":{border:0},bgcolor:e.Status>0?Re.a[100]:X.a[10]},children:[Object(j.jsx)(Fe.a,{component:"th",scope:"row",children:Object(j.jsxs)(g.a,{direction:"row",children:[e.UserName,2==e.Active&&Object(j.jsx)(te.a,{title:"User Suspended",children:Object(j.jsx)(_e.a,{style:{color:Ee.a[800]}})})]})}),Object(j.jsxs)(Fe.a,{align:"center",children:[u(e.RecDate)," ",ke()(e.RecDate).format("hh:mm a")]}),Object(j.jsx)(Fe.a,{align:"center",children:Object(j.jsxs)(g.a,{direction:"row",justifyContent:"flex-end",alignItems:"flex-end",children:[e.Status>0&&Object(j.jsx)(Y.a,{onClick:function(){return t=e.Note,alert(t);var t},children:Object(j.jsx)(Te.a,{badgeContent:1,color:"secondary",children:Object(j.jsx)(Le.a,{sx:{color:X.a[600]}})})}),2!==c&&i().data.id!==e.UserId&&Object(j.jsx)(qe,{userId:e.UserId,activeStatus:e.Active,onSuspend:r})]})})]},e.UserId)}))})]})})})}function Ve(){var e=h(),t=e.loggedIn,n=e.getCurrentUser,r=Object(a.useState)(null),c=Object(l.a)(r,2),o=c[0],s=c[1],u=Object(a.useState)(!1),d=Object(l.a)(u,2),b=d[0],O=d[1],x=Object(a.useState)(""),f=Object(l.a)(x,2),m=f[0],y=f[1],S=Object(a.useState)(!1),C=Object(l.a)(S,2),D=C[0],I=C[1];function k(e){y(e),new Audio(we).play()}function U(){return M.apply(this,arguments)}function M(){return(M=Object(be.a)(de.a.mark((function e(){var t,a,r,c;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n(),a={userId:t.data.id,role:t.data.role},r=t.token,c={headers:{Authorization:"Bearer ".concat(r)},params:a},e.next=6,p.a.get("".concat("https://pyawmal.com/api","/users/workout"),c).then((function(e){e.data.success>0?s(e.data.rows):(I(!1),k(e.data.message))})).catch((function(e){I(!1),k(e.message.toString())}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(be.a)(de.a.mark((function e(t,a){var r,c,o,s;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),c={id:t,active:a},o=r.token,s={headers:{Authorization:"Bearer ".concat(o)}},e.next=6,p.a.patch("".concat("https://pyawmal.com/api","/users/suspend"),c,s).then((function(e){e.data.success>0?I(!0):I(!1),k(e.data.message),U()})).catch((function(e){I(!1),k(e.message.toString())}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t){return A.apply(this,arguments)}function A(){return(A=Object(be.a)(de.a.mark((function e(t,a){var r,c,o,s;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),c=0==t?{userId:r.data.id,status:t}:{userId:r.data.id,status:t,note:a},o=r.token,s={headers:{Authorization:"Bearer ".concat(o)}},e.next=6,p.a.post("".concat("https://pyawmal.com/api","/users/workout"),c,s).then((function(e){e.data.success>0?I(!0):I(!1),k(e.data.message),U()})).catch((function(e){I(!1),k(e.message.toString())}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){t&&U()}),[]),t?Object(j.jsxs)("div",{children:[""!=m&&Object(j.jsx)(v.a,{severity:"".concat(D?"success":"error"),children:m}),Object(j.jsx)("br",{}),Object(j.jsxs)(g.a,{spacing:2,direction:"row",children:[Object(j.jsx)(w.a,{variant:"contained",onClick:function(){Y(0)},children:"Register"}),Object(j.jsx)("button",{children:Object(j.jsx)(De,{variant:"outlined",onSubmit:Y})})]}),Object(j.jsx)("br",{}),b&&Object(j.jsx)(De,{closeModal:O}),o?Object(j.jsx)(He,{results:o,onSuspend:function(e,t){return F.apply(this,arguments)},loginUserRole:n().data.role}):null]}):Object(j.jsx)(i.a,{to:"/"})}var Ge,Ke,Qe=n(510),Xe=function(e){return Object(j.jsx)("button",{onClick:function(){var e=Object(Qe.a)();window.open("/room/".concat(e))},children:"Create room"})},Ze=n(18),$e=n(76),et=n(239),tt=n(159),nt=n.n(tt),at=n(160),rt=at.a.div(Ge||(Ge=Object($e.a)(["\n    padding: 20px;\n    display: flex;\n    height: 100vh;\n    width: 90%;\n    margin: auto;\n    flex-wrap: wrap;\n"]))),ct=at.a.video(Ke||(Ke=Object($e.a)(["\n    height: 40%;\n    width: 50%;\n"]))),ot=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){e.peer.on("stream",(function(e){t.current.srcObject=e}))}),[]),Object(j.jsx)(ct,{playsInline:!0,autoPlay:!0,ref:t})},st={height:window.innerHeight/2,width:window.innerWidth/2},it=function(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),r=n[0],c=n[1],o=Object(a.useRef)(),s=Object(a.useRef)(),i=Object(a.useRef)([]),u=e.match.params.roomID;return Object(a.useEffect)((function(){o.current=et.a.connect("".concat("https://pyawmal.com")),navigator.mediaDevices.getUserMedia({video:st,audio:!0}).then((function(e){s.current.srcObject=e,o.current.emit("join room",u),o.current.on("all users",(function(t){var n=[];t.forEach((function(t){var a=function(e,t,n){var a=new nt.a({initiator:!0,trickle:!1,stream:n});return a.on("signal",(function(n){o.current.emit("sending signal",{userToSignal:e,callerID:t,signal:n})})),a}(t,o.current.id,e);i.current.push({peerID:t,peer:a}),n.push({peerID:t,peer:a})})),c(n)})),o.current.on("user joined",(function(t){var n=function(e,t,n){var a=new nt.a({initiator:!1,trickle:!1,stream:n});return a.on("signal",(function(e){o.current.emit("returning signal",{signal:e,callerID:t})})),a.signal(e),a}(t.signal,t.callerID,e);i.current.push({peerID:t.callerID,peer:n});var a={peer:n,peerID:t.callerID};c((function(e){return[].concat(Object(Ze.a)(e),[a])}))})),o.current.on("receiving returned signal",(function(e){i.current.find((function(t){return t.peerID===e.id})).peer.signal(e.signal)})),o.current.on("user left",(function(e){var t=i.current.find((function(t){return t.peerID==e}));t&&t.peer.destory();var n=i.current.filter((function(t){return t.peerID!==e}));i.current=n,c(n)}))}))}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{onClick:function(e){window.confirm("Are you sure to end Video Chat?")&&window.close()},children:"End call"}),Object(j.jsxs)(rt,{children:[Object(j.jsx)(ct,{muted:!0,ref:s,autoPlay:!0,playsInline:!0}),r.map((function(e){return Object(j.jsx)(ot,{peer:e.peer},e.peerID)}))]})]})};var ut=function(){var e=h(),t=e.loggedIn;return e.getCurrentUser,Object(j.jsxs)(le,{children:[t&&Object(j.jsx)(oe,{}),Object(j.jsx)(i.b,{exact:!0,path:"/",component:y}),Object(j.jsx)(i.b,{exact:!0,path:"/dashboard",component:Ve}),Object(j.jsx)(i.b,{exact:!0,path:"/create",component:ye}),Object(j.jsx)(i.b,{exact:!0,path:"/chat",component:Xe}),Object(j.jsx)(i.b,{path:"/room/:roomID",component:it})]})},lt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,542)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};o.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(s.a,{children:Object(j.jsx)(b,{children:Object(j.jsx)(ut,{})})})}),document.getElementById("root")),lt()}},[[431,1,2]]]);
//# sourceMappingURL=main.a2c99208.chunk.js.map
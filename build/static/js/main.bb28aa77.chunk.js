(this.webpackJsonpniceday=this.webpackJsonpniceday||[]).push([[0],{231:function(e,t,n){},232:function(e,t,n){},356:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(62),o=n.n(c),s=n(53),i=(n(231),n(232),n(16)),u=n(63),l=n(10),d=n(1),j=Object(a.createContext)({}),b=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)({}),s=Object(l.a)(o,2),b=(s[0],s[1]),O=Object(i.f)();Object(a.useEffect)((function(){var e=localStorage.getItem("user");e&&(b(JSON.parse(e)),c(!0))}),[]);var h={login:function(){c(!0),O.push("/dashboard")},loggedIn:r,logout:function(){localStorage.removeItem("user"),c(!1),O.push("/")},getCurrentUser:function(){var e=localStorage.getItem("user");return JSON.parse(e)}};return Object(d.jsx)(j.Provider,Object(u.a)({value:h},e))},O=function(){return r.a.useContext(j)},h=n(45),x=n.n(h),p=n(442),g=n(418),m=n(112),f=n(430),v=n(433),S=n(446),C=function(){var e=O(),t=e.loggedIn,n=e.login,r=Object(i.f)(),c=Object(a.useState)(""),o=Object(l.a)(c,2),s=o[0],u=o[1],j=Object(a.useState)(""),b=Object(l.a)(j,2),h=b[0],C=b[1],_=Object(a.useState)(),w=Object(l.a)(_,2),y=(w[0],w[1]),T=Object(a.useState)(""),D=Object(l.a)(T,2),E=D[0],P=D[1];function A(e){13===e.charCode&&I()}t&&r.push("/dashboard");var I=function(){var e={user_name:s,password:h};try{x.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST,"/users/login"),e).then((function(e){e.data.success>0?(y(e.data),localStorage.setItem("user",JSON.stringify(e.data)),n()):P(e.data.message)})).catch((function(e){P(e.message)}))}catch(t){P(t.message)}};return Object(d.jsx)(p.a,{sx:{mt:10,mb:2},children:Object(d.jsxs)(g.a,{spacing:2,direction:"column",children:[Object(d.jsx)(m.a,{variant:"h5",align:"center",children:"Sign In"}),Object(d.jsx)(f.a,{label:"user name",variant:"outlined",onChange:function(e){u(e.target.value)},onKeyPress:A}),Object(d.jsx)(f.a,{label:"password",type:"password",variant:"outlined",onChange:function(e){C(e.target.value)},onKeyPress:A}),""!=E&&Object(d.jsx)(v.a,{severity:"error",children:E}),Object(d.jsx)("br",{}),Object(d.jsx)(S.a,{onClick:I,variant:"contained",color:"primary",children:"Sign In"})]})})},_=n(5),w=n(27),y=n(437),T=n(424),D=n(447),E=n(448),P=n(444),A=n(426),I=n(445),k=n(179),R=n.n(k),U=n(182),F=n.n(U),H=n(183),N=n.n(H),W=n(434),B=n(427),L=n(428),M=n(184),K=n.n(M),Y=n(185),V=n.n(Y),z=n(186),J=n.n(z),q=n(187),G=n.n(q),Q=n(438),X=n(425),Z=n(177),$=n(198),ee=n(449),te=n(441),ne=n(429),ae=240,re=Object(_.a)("main",{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(u.a)({flexGrow:1,padding:t.spacing(3),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(ae,"px")},n&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0})})),ce=Object(_.a)(D.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(u.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{width:"calc(100% - ".concat(ae,"px)"),marginLeft:"".concat(ae,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})})),oe=Object(_.a)("div")((function(e){var t=e.theme;return Object(u.a)(Object(u.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"flex-end"})}));function se(){var e,t,n=Object(w.a)(),r=a.useState(!1),c=Object(l.a)(r,2),o=c[0],j=c[1],b=(Object(i.f)(),O()),h=b.logout,x=(b.loggedIn,b.getCurrentUser),g=Object(a.useState)(),f=Object(l.a)(g,2),v=f[0],C=f[1],_=a.useState(null),D=Object(l.a)(_,2),k=D[0],U=D[1],H=Boolean(k);Object(a.useEffect)((function(){var e=x();e&&C("".concat(e.data.user_name," (").concat(e.data.role<2?"Admin":"User",")"))}),[]);function M(){j(!1)}return Object(d.jsxs)(p.a,{sx:{display:"flex"},children:[Object(d.jsx)(T.a,{}),Object(d.jsx)(ce,{position:"fixed",open:o,children:Object(d.jsxs)(E.a,{children:[Object(d.jsx)(I.a,{color:"inherit","aria-label":"open drawer",onClick:function(){j(!0)},edge:"start",sx:Object(u.a)({mr:2},o&&{display:"none"}),children:Object(d.jsx)(R.a,{})}),Object(d.jsx)(m.a,{variant:"h6",noWrap:!0,sx:{flexGrow:1},component:"div",children:"Workout Everyday"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(I.a,{id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":H?"true":void 0,onClick:function(e){U(e.currentTarget)},children:Object(d.jsx)(te.a,{className:"avatarHover",label:null===(e=x().data)||void 0===e?void 0:e.user_name,sx:{bgcolor:X.a[400],color:Z.a[100]}})}),Object(d.jsx)($.a,{id:"basic-menu",anchorEl:k,open:H,onClose:function(){U(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:Object(d.jsx)(ee.a,{onClick:function(){h()},children:"Log out"})})]})]})}),Object(d.jsxs)(y.a,{sx:{width:ae,flexShrink:0,"& .MuiDrawer-paper":{width:ae,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:o,children:[Object(d.jsxs)(oe,{children:[Object(d.jsx)(ne.a,{title:v,children:Object(d.jsx)(Q.a,{className:"avatarHover",sx:{bgcolor:X.a[500]},children:null===(t=x().data)||void 0===t?void 0:t.user_name.substring(0,2)})}),Object(d.jsx)(I.a,{onClick:function(){j(!1)},children:"ltr"===n.direction?Object(d.jsx)(F.a,{}):Object(d.jsx)(N.a,{})})]}),Object(d.jsx)(A.a,{}),Object(d.jsxs)(P.a,{children:[Object(d.jsxs)(W.a,{button:!0,children:[Object(d.jsx)(B.a,{children:Object(d.jsx)(K.a,{})}),Object(d.jsx)(s.b,{to:"/dashboard",style:{textDecoration:"none"},onClick:M,children:"Dashboard"})]}),x().data.role<2&&Object(d.jsxs)(W.a,{button:!0,children:[Object(d.jsx)(B.a,{children:Object(d.jsx)(V.a,{})}),Object(d.jsx)(s.b,{to:"/create",style:{textDecoration:"none"},onClick:M,children:"Create Account"})]}),Object(d.jsxs)(W.a,{button:!0,children:[Object(d.jsx)(B.a,{children:Object(d.jsx)(J.a,{})}),Object(d.jsx)(L.a,{primary:"Chat Room"})]})]}),Object(d.jsx)(A.a,{}),Object(d.jsx)(P.a,{children:Object(d.jsxs)(W.a,{button:!0,children:[Object(d.jsx)(B.a,{children:Object(d.jsx)(G.a,{})}),Object(d.jsx)(S.a,{onClick:function(){h()},children:"Log Out"})]})})]}),Object(d.jsx)(re,{open:o,children:Object(d.jsx)(oe,{})})]})}var ie=n(450),ue=n(453);function le(){return Object(d.jsxs)(m.a,{variant:"body2",color:"text.secondary",children:["Copyright \xa9 ",Object(d.jsx)(ue.a,{color:"inherit",href:"https://material-ui.com/",children:"Workout Everyday"})," ",(new Date).getFullYear(),"."]})}function de(e){var t=e.children;return Object(d.jsxs)(p.a,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[Object(d.jsx)(ie.a,{component:"main",maxWidth:"sm",children:t}),Object(d.jsx)(p.a,{component:"footer",sx:{py:3,px:2,mt:"auto",backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[200]:e.palette.grey[800]}},children:Object(d.jsxs)(ie.a,{maxWidth:"sm",children:[Object(d.jsx)(m.a,{variant:"body1"}),Object(d.jsx)(le,{})]})})]})}var je=n(43),be=n.n(je),Oe=n(74),he=n(432),xe=n(439),pe=n(451),ge=n(443),me=n(419),fe=n(196),ve=n(87),Se=ve.a().shape({username:ve.b().required("User name is required!"),password:ve.b().min(5).max(20).required("Password is required!")}),Ce=n.p+"static/media/notification-sound.5b9ecb19.wav";function _e(){var e=Object(i.f)(),t=O(),n=t.loggedIn,r=t.getCurrentUser;(!n||r().data.role>1)&&e.push("/");var c=Object(a.useState)("2"),o=Object(l.a)(c,2),s=o[0],u=o[1],j=Object(a.useState)(""),b=Object(l.a)(j,2),h=b[0],p=b[1],C=Object(a.useState)(!1),_=Object(l.a)(C,2),w=_[0],y=_[1],T=Object(a.useState)("2"),D=Object(l.a)(T,2),E=(D[0],D[1],Object(fe.a)({initialValues:{username:"",password:""},onSubmit:function(e){A(e)},validationSchema:Se}));function P(e){p(e),new Audio(Ce).play()}var A=function(){var e=Object(Oe.a)(be.a.mark((function e(t){var n,a,c,o,i,u;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r(),a={user_name:t.username,password:t.password,role:s,parent_id:n.data.id},c=n.token,o={headers:{Authorization:"Bearer ".concat(c)}},e.prev=4,e.next=7,x.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST,"/users"),a,o).catch((function(e){throw e}));case 7:u=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),i=e.t0;case 13:i?(y(!1),P(i.message)):(u.data.success>0?y(!0):y(!1),P(u.data.message),E.resetForm());case 14:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();return n?Object(d.jsx)("form",{onSubmit:E.handleSubmit,children:Object(d.jsxs)(g.a,{spacing:2,direction:"column",children:[Object(d.jsx)(m.a,{variant:"h5",align:"center",children:"Create Account"}),Object(d.jsx)(f.a,{label:"user name",variant:"outlined",name:"username",value:E.values.username,onChange:E.handleChange,error:E.touched.username&&Boolean(E.errors.username),helperText:E.touched.username&&E.errors.username,onBlur:E.handleBlur,autoComplete:"off"}),Object(d.jsx)(f.a,{label:"password",type:"password",variant:"outlined",name:"password",value:E.values.password,onChange:E.handleChange,error:E.touched.password&&Boolean(E.errors.password),helperText:E.touched.password&&E.errors.password,onBlur:E.handleBlur}),0===r().data.role&&Object(d.jsxs)(ge.a,{component:"fieldset",children:[Object(d.jsx)(me.a,{component:"legend",children:"Role"}),Object(d.jsxs)(xe.a,{"aria-label":"gender",name:"controlled-radio-buttons-group",value:s,onChange:function(e){u(e.target.value)},children:[Object(d.jsx)(pe.a,{value:"1",control:Object(d.jsx)(he.a,{}),label:"Admin"}),Object(d.jsx)(pe.a,{value:"2",control:Object(d.jsx)(he.a,{}),label:"User"})]})]}),""!=h&&Object(d.jsx)(v.a,{severity:"".concat(w?"success":"error"),children:h}),Object(d.jsx)("br",{}),Object(d.jsx)(S.a,{type:"submit",variant:"contained",color:"primary",children:"Create Account"})]})}):Object(d.jsx)(i.a,{to:"/"})}var we=n(435),ye={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function Te(e){var t=e.onSubmit,n=O(),c=(n.loggedIn,n.getCurrentUser,Object(a.useState)("")),o=Object(l.a)(c,2),s=o[0],i=o[1],u=r.a.useState(!1),j=Object(l.a)(u,2),b=j[0],h=j[1],x=function(){return h(!1)};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p.a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off"}),Object(d.jsx)(S.a,{onClick:function(){return h(!0)},children:"Rest Day"}),Object(d.jsx)(we.a,{open:b,onClose:x,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(d.jsx)(p.a,{sx:ye,children:Object(d.jsxs)(g.a,{direction:"column",spacing:2,children:[Object(d.jsx)(m.a,{variant:"h5",gutterBottom:!0,component:"div",children:"Write something"}),Object(d.jsx)(f.a,{id:"outlined-multiline-static",label:"Notes",multiline:!0,rows:4,onChange:function(e){i(e.target.value)}}),Object(d.jsxs)(g.a,{spacing:2,direction:"row",children:[Object(d.jsx)(S.a,{align:"left",variant:"contained",className:"submit",onClick:function(){t(1,s),x()},children:"Post"}),Object(d.jsx)(S.a,{align:"right",variant:"contained",className:"cancel",onClick:function(){return x()},children:"Cancel"})]})]})})})]})}var De=n(132),Ee=n.n(De),Pe=n(460),Ae=n(464),Ie=n(463),ke=n(459),Re=n(461),Ue=n(462),Fe=n(452);n(454),n(458),n(456),n(457),n(455);var He=n(68),Ne=n(76),We=n(195),Be=n.n(We),Le=n(436),Me=n(194),Ke=n.n(Me),Ye=n(193),Ve=n.n(Ye);function ze(e){var t=e.userId,n=e.activeStatus,r=e.onSuspend,c=a.useState(null),o=Object(l.a)(c,2),s=o[0],i=o[1],u=Boolean(s);return Object(d.jsxs)("div",{children:[Object(d.jsx)(I.a,{id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":u?"true":void 0,onClick:function(e){i(e.currentTarget)},children:Object(d.jsx)(Ve.a,{})}),Object(d.jsxs)($.a,{id:"basic-menu",anchorEl:s,open:u,onClose:function(){i(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(d.jsx)(ee.a,{onClick:function(){!function(e,t){r(e,t),i(null)}(t,n)},children:2!=n?"Suspend":"Unsuspend"}),Object(d.jsx)(ee.a,{onClick:function(){i(null)},children:"Remove User"})]})]})}function Je(e){var t=e.results,r=e.onSuspend,c=e.loginUserRole,o=Object(a.useState)(!1),s=Object(l.a)(o,2),i=(s[0],s[1],O().getCurrentUser);function u(e){var t=n(132),a=t().toDate();return t(a).format("DD/MM/YYYY")===t(e).format("DD/MM/YYYY")?"Today":a.getMonth()==new Date(e).getMonth()&&a.getFullYear()==new Date(e).getFullYear()?a.getDate()-new Date(e).getDate()==1?"Yesterday":"".concat(a.getDate()-new Date(e).getDate()," days ago"):a.getMonth()!=new Date(e).getMonth()&&a.getFullYear()==new Date(e).getFullYear()?a.getMonth()-new Date(e).getMonth()==1?"1 month ago":"".concat(a.getMonth()-new Date(e).getMonth()," months ago"):"".concat(a.getFullYear()-new Date(e).getFullYear()," Year(s) ago")}return Object(d.jsx)(d.Fragment,{children:t&&Object(d.jsx)(ke.a,{component:Fe.a,children:Object(d.jsxs)(Pe.a,{children:[Object(d.jsx)(Re.a,{children:Object(d.jsxs)(Ue.a,{children:[Object(d.jsx)(Ie.a,{children:"Name"}),Object(d.jsx)(Ie.a,{align:"center",children:"Active"}),Object(d.jsx)(Ie.a,{align:"center"})]})}),Object(d.jsx)(Ae.a,{children:t.map((function(e,t){return Object(d.jsxs)(Ue.a,{sx:{"&:last-child td, &:last-child th":{border:0},bgcolor:e.Status>0?He.a[100]:Z.a[10]},children:[Object(d.jsx)(Ie.a,{component:"th",scope:"row",children:Object(d.jsxs)(g.a,{direction:"row",children:[e.UserName,2==e.Active&&Object(d.jsx)(ne.a,{title:"User Suspended",children:Object(d.jsx)(Ke.a,{style:{color:Ne.a[800]}})})]})}),Object(d.jsxs)(Ie.a,{align:"center",children:[u(e.RecDate)," ",Ee()(e.RecDate).format("hh:mm a")]}),Object(d.jsx)(Ie.a,{align:"center",children:Object(d.jsxs)(g.a,{direction:"row",justifyContent:"flex-end",alignItems:"flex-end",children:[e.Status>0&&Object(d.jsx)(I.a,{onClick:function(){return t=e.Note,alert(t);var t},children:Object(d.jsx)(Le.a,{badgeContent:1,color:"secondary",children:Object(d.jsx)(Be.a,{sx:{color:Z.a[600]}})})}),2!==c&&i().data.id!==e.UserId&&Object(d.jsx)(ze,{userId:e.UserId,activeStatus:e.Active,onSuspend:r})]})})]},e.UserId)}))})]})})})}function qe(){var e=O(),t=e.loggedIn,n=e.getCurrentUser,r=Object(a.useState)(null),c=Object(l.a)(r,2),o=c[0],s=c[1],u=Object(a.useState)(!1),j=Object(l.a)(u,2),b=j[0],h=j[1],p=Object(a.useState)(""),m=Object(l.a)(p,2),f=m[0],C=m[1],_=Object(a.useState)(!1),w=Object(l.a)(_,2),y=w[0],T=w[1];function D(e){C(e),new Audio(Ce).play()}function E(){return P.apply(this,arguments)}function P(){return(P=Object(Oe.a)(be.a.mark((function e(){var t,a,r,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n(),a={userId:t.data.id,role:t.data.role},r=t.token,c={headers:{Authorization:"Bearer ".concat(r)},params:a},e.next=6,x.a.get("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST,"/users/workout"),c).then((function(e){e.data.success>0?s(e.data.rows):(T(!1),D(e.data.message))})).catch((function(e){T(!1),D(e.message.toString())}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(Oe.a)(be.a.mark((function e(t,a){var r,c,o,s;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),c={id:t,active:a},o=r.token,s={headers:{Authorization:"Bearer ".concat(o)}},e.next=6,x.a.patch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST,"/users/suspend"),c,s).then((function(e){e.data.success>0?T(!0):T(!1),D(e.data.message),E()})).catch((function(e){T(!1),D(e.message.toString())}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return k.apply(this,arguments)}function k(){return(k=Object(Oe.a)(be.a.mark((function e(t,a){var r,c,o,s;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),c=0==t?{userId:r.data.id,status:t}:{userId:r.data.id,status:t,note:a},o=r.token,s={headers:{Authorization:"Bearer ".concat(o)}},e.next=6,x.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST,"/users/workout"),c,s).then((function(e){e.data.success>0?T(!0):T(!1),D(e.data.message),E()})).catch((function(e){T(!1),D(e.message.toString())}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){t&&E()}),[]),t?Object(d.jsxs)("div",{children:[""!=f&&Object(d.jsx)(v.a,{severity:"".concat(y?"success":"error"),children:f}),Object(d.jsx)("br",{}),Object(d.jsxs)(g.a,{spacing:2,direction:"row",children:[Object(d.jsx)(S.a,{variant:"contained",onClick:function(){I(0)},children:"Register"}),Object(d.jsx)("button",{children:Object(d.jsx)(Te,{variant:"outlined",onSubmit:I})})]}),Object(d.jsx)("br",{}),b&&Object(d.jsx)(Te,{closeModal:h}),o?Object(d.jsx)(Je,{results:o,onSuspend:function(e,t){return A.apply(this,arguments)},loginUserRole:n().data.role}):null]}):Object(d.jsx)(i.a,{to:"/"})}var Ge=function(){var e=O(),t=e.loggedIn;return e.getCurrentUser,Object(d.jsxs)(de,{children:[t&&Object(d.jsx)(se,{}),Object(d.jsx)(i.b,{exact:!0,path:"/",component:C}),Object(d.jsx)(i.b,{exact:!0,path:"/dashboard",component:qe}),Object(d.jsx)(i.b,{exact:!0,path:"/create",component:_e})]})},Qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,465)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(s.a,{children:Object(d.jsx)(b,{children:Object(d.jsx)(Ge,{})})})}),document.getElementById("root")),Qe()}},[[356,1,2]]]);
//# sourceMappingURL=main.bb28aa77.chunk.js.map